# CloudBase AI MCP ä¸ ToolKit æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

Model Context Protocol (MCP) æ˜¯ä¸€ä¸ªå¼€æ”¾çš„åè®®ï¼Œæ—¨åœ¨æä¾›å¤§æ¨¡å‹ä¸å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·ä¹‹é—´çš„æ ‡å‡†åŒ–æ¥å£ã€‚CloudBase AI ToolKit æ˜¯ä¸€ä¸ªåŸºäº MCP åè®®çš„å¼€å‘å·¥å…·åŒ…ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„å·¥å…·å’Œèµ„æºï¼Œä»¥ä¾¿æ›´å¥½åœ°ä½¿ç”¨å’Œç®¡ç†å„ç§ AI æ¨¡å‹ã€‚

## ğŸ” ä»€ä¹ˆæ˜¯ MCPï¼Ÿ

MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä¸€ä¸ªç”± Anthropic å¼€å‘çš„å¼€æ”¾åè®®ï¼Œç”¨äºåœ¨å¤§æ¨¡å‹ä¸å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·ä¹‹é—´å»ºç«‹æ ‡å‡†åŒ–çš„é€šä¿¡æ¥å£ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³å¤§æ¨¡å‹åº”ç”¨ä¸­çš„"ä¸Šä¸‹æ–‡å­¤å²›"é—®é¢˜ï¼Œè®©AIç³»ç»Ÿèƒ½å¤Ÿå®‰å…¨ã€å¯æ§åœ°è®¿é—®å’Œæ“ä½œå¤–éƒ¨èµ„æºã€‚

### æ ¸å¿ƒç‰¹æ€§

1. **æ ‡å‡†åŒ–æ¥å£**ï¼šä¸ºä¸åŒçš„å·¥å…·å’Œæ•°æ®æºæä¾›ç»Ÿä¸€çš„æ¥å£è§„èŒƒ
2. **å®‰å…¨æ€§**ï¼šå†…ç½®æƒé™æ§åˆ¶å’Œå®‰å…¨æœºåˆ¶
3. **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒè‡ªå®šä¹‰å·¥å…·å’Œæ•°æ®æº
4. **äº’æ“ä½œæ€§**ï¼šæ”¯æŒè·¨å¹³å°å’Œè·¨è¯­è¨€çš„é›†æˆ

### ä¸»è¦ç»„ä»¶

- **MCP æœåŠ¡å™¨**ï¼šæä¾›ç‰¹å®šåŠŸèƒ½çš„æœåŠ¡ç»„ä»¶
- **MCP å®¢æˆ·ç«¯**ï¼šè¿æ¥å’Œä½¿ç”¨ MCP æœåŠ¡å™¨çš„å®¢æˆ·ç«¯åº”ç”¨
- **å·¥å…·ï¼ˆToolsï¼‰**ï¼šå¯è¢«å¤§æ¨¡å‹è°ƒç”¨çš„å‡½æ•°æˆ–æ“ä½œ
- **èµ„æºï¼ˆResourcesï¼‰**ï¼šå¯è¢«å¤§æ¨¡å‹è®¿é—®çš„æ•°æ®æºæˆ–æ–‡ä»¶

## ğŸ¯ MCP åº”ç”¨åœºæ™¯

### 1. æ•°æ®è®¿é—®
- è¿æ¥æ•°æ®åº“ã€API å’Œæ–‡ä»¶ç³»ç»Ÿ
- å®æ—¶è·å–å¤–éƒ¨æ•°æ®
- å¤„ç†ç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®

### 2. å·¥å…·é›†æˆ
- é›†æˆå¤–éƒ¨å·¥å…·å’ŒæœåŠ¡
- æ‰§è¡Œå¤æ‚çš„è®¡ç®—ä»»åŠ¡
- è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹

### 3. å¤šæ¨¡æ€å¤„ç†
- å¤„ç†æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§æ•°æ®ç±»å‹
- è·¨æ¨¡æ€æ•°æ®è½¬æ¢å’Œåˆ†æ

## ğŸ› ï¸ CloudBase AI ToolKit ä»‹ç»

CloudBase AI ToolKit æ˜¯è…¾è®¯äº‘å¼€å‘æ¨å‡ºçš„ä¸€å¥—åŸºäº MCP åè®®çš„å¼€å‘å·¥å…·åŒ…ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…æ›´é«˜æ•ˆåœ°æ„å»ºå’Œç®¡ç†AIåº”ç”¨ã€‚

### ä¸»è¦åŠŸèƒ½

1. **MCP æœåŠ¡å™¨ç®¡ç†**ï¼šè½»æ¾éƒ¨ç½²å’Œç®¡ç† MCP æœåŠ¡å™¨
2. **å·¥å…·é›†æˆ**ï¼šæä¾›ä¸°å¯Œçš„é¢„æ„å»ºå·¥å…·å’Œè‡ªå®šä¹‰å·¥å…·æ”¯æŒ
3. **å¼€å‘ç¯å¢ƒ**ï¼šé›†æˆä¸»æµAIç¼–è¾‘å™¨å¦‚ Cursorã€WindSurf ç­‰
4. **äº‘ç«¯éƒ¨ç½²**ï¼šæ”¯æŒäº‘ç«¯éƒ¨ç½²å’Œç®¡ç†
5. **ç›‘æ§è°ƒè¯•**ï¼šæä¾›å®Œå–„çš„ç›‘æ§å’Œè°ƒè¯•å·¥å…·

### æ”¯æŒçš„AIç¼–è¾‘å™¨

- **Cursor**ï¼šé›†æˆåº¦æœ€é«˜ï¼Œæ”¯æŒå®Œæ•´çš„ MCP åŠŸèƒ½
- **WindSurf**ï¼šå…¨é¢æ”¯æŒ MCP åè®®
- **Comate**ï¼šè…¾è®¯è‡ªç ”çš„AIç¼–ç¨‹åŠ©æ‰‹
- **Zed**ï¼šé«˜æ€§èƒ½çš„ç°ä»£ç¼–è¾‘å™¨
- **Claude Desktop**ï¼šAnthropic å®˜æ–¹å®¢æˆ·ç«¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. **å®‰è£… Node.js**
   ```bash
   # æ¨èä½¿ç”¨ Node.js 18+ ç‰ˆæœ¬
   node --version
   npm --version
   ```

2. **å®‰è£… CloudBase AI ToolKit**
   ```bash
   npm install -g @cloudbase/ai-toolkit
   ```

3. **åˆå§‹åŒ–é¡¹ç›®**
   ```bash
   cbai init my-ai-project
   cd my-ai-project
   ```

### åˆ›å»ºç¬¬ä¸€ä¸ª MCP æœåŠ¡å™¨

1. **åˆ›å»ºæœåŠ¡å™¨é…ç½®**
   ```bash
   cbai create-server weather-server
   ```

2. **ç¼–å†™æœåŠ¡å™¨ä»£ç **
   ```javascript
   // src/weather-server.js
   import { Server } from "@modelcontextprotocol/sdk/server/index.js";
   import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
   
   const server = new Server({
     name: "weather-server",
     version: "1.0.0",
   });
   
   server.setRequestHandler("tools/list", async () => {
     return {
       tools: [
         {
           name: "get_weather",
           description: "è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯",
           inputSchema: {
             type: "object",
             properties: {
               city: { type: "string", description: "åŸå¸‚åç§°" },
             },
             required: ["city"],
           },
         },
       ],
     };
   });
   
   server.setRequestHandler("tools/call", async (request) => {
     const { name, arguments: args } = request.params;
     
     if (name === "get_weather") {
       const { city } = args;
       return {
         content: [
           {
             type: "text",
             text: `${city}çš„å¤©æ°”ï¼šæ™´å¤©ï¼Œæ¸©åº¦ 25Â°Cï¼Œæ¹¿åº¦ 60%`,
           },
         ],
       };
     }
   });
   
   const transport = new StdioServerTransport();
   server.connect(transport);
   ```

3. **é…ç½® MCP å®¢æˆ·ç«¯**
   ```json
   // mcp-config.json
   {
     "servers": {
       "weather-server": {
         "command": "node",
         "args": ["src/weather-server.js"]
       }
     }
   }
   ```

4. **è¿è¡ŒæœåŠ¡å™¨**
   ```bash
   cbai run weather-server
   ```

## ğŸ“¦ é¢„æ„å»ºå·¥å…·

### 1. æ–‡ä»¶ç³»ç»Ÿå·¥å…·
```javascript
// æ–‡ä»¶è¯»å†™å·¥å…·
const fileTools = {
  name: "file-operations",
  tools: [
    {
      name: "read_file",
      description: "è¯»å–æ–‡ä»¶å†…å®¹",
      inputSchema: {
        type: "object",
        properties: {
          path: { type: "string", description: "æ–‡ä»¶è·¯å¾„" }
        },
        required: ["path"]
      }
    },
    {
      name: "write_file",
      description: "å†™å…¥æ–‡ä»¶å†…å®¹",
      inputSchema: {
        type: "object",
        properties: {
          path: { type: "string", description: "æ–‡ä»¶è·¯å¾„" },
          content: { type: "string", description: "æ–‡ä»¶å†…å®¹" }
        },
        required: ["path", "content"]
      }
    }
  ]
};
```

### 2. æ•°æ®åº“å·¥å…·
```javascript
// æ•°æ®åº“æ“ä½œå·¥å…·
const dbTools = {
  name: "database-operations",
  tools: [
    {
      name: "query_database",
      description: "æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢",
      inputSchema: {
        type: "object",
        properties: {
          query: { type: "string", description: "SQLæŸ¥è¯¢è¯­å¥" },
          database: { type: "string", description: "æ•°æ®åº“åç§°" }
        },
        required: ["query"]
      }
    }
  ]
};
```

### 3. HTTP è¯·æ±‚å·¥å…·
```javascript
// HTTP è¯·æ±‚å·¥å…·
const httpTools = {
  name: "http-requests",
  tools: [
    {
      name: "make_request",
      description: "å‘é€HTTPè¯·æ±‚",
      inputSchema: {
        type: "object",
        properties: {
          url: { type: "string", description: "è¯·æ±‚URL" },
          method: { type: "string", enum: ["GET", "POST", "PUT", "DELETE"] },
          headers: { type: "object", description: "è¯·æ±‚å¤´" },
          body: { type: "string", description: "è¯·æ±‚ä½“" }
        },
        required: ["url", "method"]
      }
    }
  ]
};
```

## ğŸ¨ è‡ªå®šä¹‰å·¥å…·å¼€å‘

### åˆ›å»ºè‡ªå®šä¹‰å·¥å…·

1. **å®šä¹‰å·¥å…·ç»“æ„**
   ```javascript
   // tools/custom-tool.js
   export class CustomTool {
     constructor(name, description, inputSchema, handler) {
       this.name = name;
       this.description = description;
       this.inputSchema = inputSchema;
       this.handler = handler;
     }
   
     async execute(args) {
       return await this.handler(args);
     }
   }
   ```

2. **å®ç°å…·ä½“åŠŸèƒ½**
   ```javascript
   // tools/calculator.js
   import { CustomTool } from './custom-tool.js';
   
   export const calculatorTool = new CustomTool(
     "calculator",
     "æ‰§è¡Œæ•°å­¦è®¡ç®—",
     {
       type: "object",
       properties: {
         expression: { type: "string", description: "æ•°å­¦è¡¨è¾¾å¼" }
       },
       required: ["expression"]
     },
     async ({ expression }) => {
       try {
         const result = eval(expression);
         return {
           content: [
             {
               type: "text",
               text: `è®¡ç®—ç»“æœï¼š${result}`
             }
           ]
         };
       } catch (error) {
         return {
           content: [
             {
               type: "text",
               text: `è®¡ç®—é”™è¯¯ï¼š${error.message}`
             }
           ]
         };
       }
     }
   );
   ```

3. **æ³¨å†Œå·¥å…·**
   ```javascript
   // server.js
   import { calculatorTool } from './tools/calculator.js';
   
   server.setRequestHandler("tools/list", async () => {
     return {
       tools: [
         {
           name: calculatorTool.name,
           description: calculatorTool.description,
           inputSchema: calculatorTool.inputSchema
         }
       ]
     };
   });
   
   server.setRequestHandler("tools/call", async (request) => {
     const { name, arguments: args } = request.params;
     
     if (name === calculatorTool.name) {
       return await calculatorTool.execute(args);
     }
   });
   ```

## ğŸ—ï¸ é¡¹ç›®æ¨¡æ¿

### React é¡¹ç›®æ¨¡æ¿

```bash
# åˆ›å»º React é¡¹ç›®
cbai create-project my-react-app --template react-mcp

# é¡¹ç›®ç»“æ„
my-react-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ChatInterface.jsx
â”‚   â”‚   â”œâ”€â”€ ToolPanel.jsx
â”‚   â”‚   â””â”€â”€ MessageList.jsx
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useMCP.js
â”‚   â”‚   â””â”€â”€ useTools.js
â”‚   â”œâ”€â”€ mcp/
â”‚   â”‚   â”œâ”€â”€ client.js
â”‚   â”‚   â””â”€â”€ tools/
â”‚   â””â”€â”€ App.jsx
â”œâ”€â”€ mcp-config.json
â””â”€â”€ package.json
```

### Vue é¡¹ç›®æ¨¡æ¿

```bash
# åˆ›å»º Vue é¡¹ç›®
cbai create-project my-vue-app --template vue-mcp

# é¡¹ç›®ç»“æ„
my-vue-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ChatInterface.vue
â”‚   â”‚   â”œâ”€â”€ ToolPanel.vue
â”‚   â”‚   â””â”€â”€ MessageList.vue
â”‚   â”œâ”€â”€ composables/
â”‚   â”‚   â”œâ”€â”€ useMCP.js
â”‚   â”‚   â””â”€â”€ useTools.js
â”‚   â”œâ”€â”€ mcp/
â”‚   â”‚   â”œâ”€â”€ client.js
â”‚   â”‚   â””â”€â”€ tools/
â”‚   â””â”€â”€ App.vue
â”œâ”€â”€ mcp-config.json
â””â”€â”€ package.json
```

### Node.js æœåŠ¡å™¨æ¨¡æ¿

```bash
# åˆ›å»º Node.js æœåŠ¡å™¨
cbai create-project my-server --template node-mcp-server

# é¡¹ç›®ç»“æ„
my-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ file-operations.js
â”‚   â”‚   â”œâ”€â”€ database-operations.js
â”‚   â”‚   â””â”€â”€ http-requests.js
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ logger.js
â”‚       â””â”€â”€ config.js
â”œâ”€â”€ mcp-config.json
â””â”€â”€ package.json
```

## ğŸ”§ é…ç½®å’Œéƒ¨ç½²

### æœ¬åœ°å¼€å‘é…ç½®

1. **MCP é…ç½®æ–‡ä»¶**
   ```json
   // mcp-config.json
   {
     "servers": {
       "my-server": {
         "command": "node",
         "args": ["src/server.js"],
         "env": {
           "NODE_ENV": "development"
         }
       }
     },
     "tools": {
       "enabled": ["file-operations", "database-operations"],
       "disabled": []
     },
     "logging": {
       "level": "debug",
       "file": "logs/mcp.log"
     }
   }
   ```

2. **ç¯å¢ƒå˜é‡é…ç½®**
   ```bash
   # .env
   MCP_SERVER_PORT=3000
   MCP_SERVER_HOST=localhost
   DATABASE_URL=mongodb://localhost:27017/mydb
   API_KEY=your-api-key
   ```

### äº‘ç«¯éƒ¨ç½²

1. **æ„å»º Docker é•œåƒ**
   ```dockerfile
   # Dockerfile
   FROM node:18-alpine
   
   WORKDIR /app
   
   COPY package*.json ./
   RUN npm ci --only=production
   
   COPY src/ ./src/
   COPY mcp-config.json ./
   
   EXPOSE 3000
   
   CMD ["npm", "start"]
   ```

2. **éƒ¨ç½²åˆ°äº‘å¼€å‘**
   ```bash
   # éƒ¨ç½²åˆ°äº‘å¼€å‘ç¯å¢ƒ
   cbai deploy --env production
   
   # æˆ–è€…ä½¿ç”¨ Docker éƒ¨ç½²
   cbai deploy --docker --env production
   ```

## ğŸ¯ MCP å·¥å…·è§„æ ¼

### å·¥å…·å®šä¹‰è§„èŒƒ

```typescript
interface MCPTool {
  name: string;
  description: string;
  inputSchema: {
    type: "object";
    properties: Record<string, any>;
    required?: string[];
  };
  outputSchema?: {
    type: "object";
    properties: Record<string, any>;
  };
}
```

### å·¥å…·è°ƒç”¨è§„èŒƒ

```typescript
interface ToolCallRequest {
  method: "tools/call";
  params: {
    name: string;
    arguments: Record<string, any>;
  };
}

interface ToolCallResponse {
  content: Array<{
    type: "text" | "image" | "resource";
    text?: string;
    data?: string;
    mimeType?: string;
  }>;
  isError?: boolean;
}
```

### èµ„æºè®¿é—®è§„èŒƒ

```typescript
interface ResourceRequest {
  method: "resources/read";
  params: {
    uri: string;
  };
}

interface ResourceResponse {
  contents: Array<{
    uri: string;
    mimeType?: string;
    text?: string;
    blob?: string;
  }>;
}
```

## ğŸ“ æ•™ç¨‹æ¡ˆä¾‹

### æ¡ˆä¾‹ä¸€ï¼šæ„å»ºæ™ºèƒ½æ–‡æ¡£å¤„ç†å™¨

1. **éœ€æ±‚åˆ†æ**
   - æ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼ï¼ˆPDFã€Wordã€Excelï¼‰
   - è‡ªåŠ¨æå–æ–‡æ¡£å†…å®¹
   - æ™ºèƒ½é—®ç­”å’Œæ‘˜è¦ç”Ÿæˆ

2. **æ¶æ„è®¾è®¡**
   ```mermaid
   graph TB
     A[ç”¨æˆ·è¾“å…¥] --> B[MCPå®¢æˆ·ç«¯]
     B --> C[æ–‡æ¡£å¤„ç†æœåŠ¡å™¨]
     C --> D[æ–‡æ¡£è§£æå·¥å…·]
     C --> E[å†…å®¹æå–å·¥å…·]
     C --> F[AIå¤„ç†å·¥å…·]
     D --> G[è¿”å›ç»“æœ]
     E --> G
     F --> G
   ```

3. **å®ç°æ­¥éª¤**
   ```javascript
   // æ–‡æ¡£å¤„ç†å·¥å…·
   const documentProcessor = {
     name: "document-processor",
     tools: [
       {
         name: "extract_text",
         description: "ä»æ–‡æ¡£ä¸­æå–æ–‡æœ¬å†…å®¹",
         inputSchema: {
           type: "object",
           properties: {
             file_path: { type: "string" },
             file_type: { type: "string", enum: ["pdf", "docx", "xlsx"] }
           },
           required: ["file_path", "file_type"]
         }
       },
       {
         name: "summarize_content",
         description: "ç”Ÿæˆæ–‡æ¡£æ‘˜è¦",
         inputSchema: {
           type: "object",
           properties: {
             content: { type: "string" },
             max_length: { type: "number", default: 200 }
           },
           required: ["content"]
         }
       }
     ]
   };
   ```

### æ¡ˆä¾‹äºŒï¼šæ„å»ºä»£ç åˆ†æåŠ©æ‰‹

1. **åŠŸèƒ½ç‰¹æ€§**
   - ä»£ç è´¨é‡åˆ†æ
   - æ¼æ´æ£€æµ‹
   - æ€§èƒ½ä¼˜åŒ–å»ºè®®
   - è‡ªåŠ¨åŒ–é‡æ„

2. **å·¥å…·å®ç°**
   ```javascript
   // ä»£ç åˆ†æå·¥å…·
   const codeAnalyzer = {
     name: "code-analyzer",
     tools: [
       {
         name: "analyze_code",
         description: "åˆ†æä»£ç è´¨é‡å’Œæ½œåœ¨é—®é¢˜",
         inputSchema: {
           type: "object",
           properties: {
             code: { type: "string" },
             language: { type: "string" },
             rules: { type: "array", items: { type: "string" } }
           },
           required: ["code", "language"]
         }
       },
       {
         name: "suggest_improvements",
         description: "æä¾›ä»£ç æ”¹è¿›å»ºè®®",
         inputSchema: {
           type: "object",
           properties: {
             code: { type: "string" },
             issues: { type: "array" }
           },
           required: ["code", "issues"]
         }
       }
     ]
   };
   ```

### æ¡ˆä¾‹ä¸‰ï¼šæ„å»ºæ•°æ®å¯è§†åŒ–å·¥å…·

1. **æ ¸å¿ƒåŠŸèƒ½**
   - æ•°æ®æºè¿æ¥
   - å›¾è¡¨ç”Ÿæˆ
   - äº¤äº’å¼ä»ªè¡¨æ¿
   - æ•°æ®å¯¼å‡º

2. **å®ç°ç¤ºä¾‹**
   ```javascript
   // æ•°æ®å¯è§†åŒ–å·¥å…·
   const dataVisualizer = {
     name: "data-visualizer",
     tools: [
       {
         name: "create_chart",
         description: "åˆ›å»ºæ•°æ®å›¾è¡¨",
         inputSchema: {
           type: "object",
           properties: {
             data: { type: "array" },
             chart_type: { type: "string", enum: ["bar", "line", "pie", "scatter"] },
             options: { type: "object" }
           },
           required: ["data", "chart_type"]
         }
       },
       {
         name: "export_chart",
         description: "å¯¼å‡ºå›¾è¡¨",
         inputSchema: {
           type: "object",
           properties: {
             chart_id: { type: "string" },
             format: { type: "string", enum: ["png", "svg", "pdf"] }
           },
           required: ["chart_id", "format"]
         }
       }
     ]
   };
   ```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. è¿æ¥æ± ç®¡ç†
```javascript
// è¿æ¥æ± é…ç½®
const poolConfig = {
  max: 10,
  min: 2,
  idleTimeoutMillis: 30000,
  createTimeoutMillis: 10000
};

class MCPConnectionPool {
  constructor(config) {
    this.pool = new Pool(config);
  }

  async getConnection() {
    return await this.pool.acquire();
  }

  async releaseConnection(connection) {
    await this.pool.release(connection);
  }
}
```

### 2. ç¼“å­˜ç­–ç•¥
```javascript
// ç»“æœç¼“å­˜
class ResultCache {
  constructor(ttl = 300000) { // 5åˆ†é’Ÿç¼“å­˜
    this.cache = new Map();
    this.ttl = ttl;
  }

  set(key, value) {
    const expiry = Date.now() + this.ttl;
    this.cache.set(key, { value, expiry });
  }

  get(key) {
    const item = this.cache.get(key);
    if (!item || Date.now() > item.expiry) {
      this.cache.delete(key);
      return null;
    }
    return item.value;
  }
}
```

### 3. å¹¶å‘æ§åˆ¶
```javascript
// å¹¶å‘é™åˆ¶
class ConcurrencyLimiter {
  constructor(limit = 5) {
    this.limit = limit;
    this.current = 0;
    this.queue = [];
  }

  async execute(fn) {
    return new Promise((resolve, reject) => {
      this.queue.push({ fn, resolve, reject });
      this.process();
    });
  }

  async process() {
    if (this.current >= this.limit || this.queue.length === 0) {
      return;
    }

    this.current++;
    const { fn, resolve, reject } = this.queue.shift();

    try {
      const result = await fn();
      resolve(result);
    } catch (error) {
      reject(error);
    } finally {
      this.current--;
      this.process();
    }
  }
}
```

## ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘

### 1. æƒé™æ§åˆ¶
```javascript
// æƒé™éªŒè¯
class PermissionManager {
  constructor(config) {
    this.permissions = new Map(config.permissions);
    this.roles = new Map(config.roles);
  }

  hasPermission(user, action, resource) {
    const userRole = this.roles.get(user.id);
    const permissions = this.permissions.get(userRole);
    
    return permissions && permissions.includes(`${action}:${resource}`);
  }

  validateToolAccess(user, toolName) {
    return this.hasPermission(user, 'execute', toolName);
  }
}
```

### 2. è¾“å…¥éªŒè¯
```javascript
// è¾“å…¥éªŒè¯
class InputValidator {
  static validate(input, schema) {
    const ajv = new Ajv();
    const validate = ajv.compile(schema);
    
    if (!validate(input)) {
      throw new Error(`è¾“å…¥éªŒè¯å¤±è´¥: ${ajv.errorsText(validate.errors)}`);
    }
    
    return true;
  }

  static sanitize(input) {
    if (typeof input === 'string') {
      return input.replace(/[<>]/g, '');
    }
    return input;
  }
}
```

### 3. å®¡è®¡æ—¥å¿—
```javascript
// å®¡è®¡æ—¥å¿—
class AuditLogger {
  constructor(config) {
    this.logger = createLogger(config);
  }

  logToolExecution(user, tool, args, result) {
    this.logger.info({
      event: 'tool_execution',
      user: user.id,
      tool: tool.name,
      args: this.sanitizeArgs(args),
      result: result.success,
      timestamp: new Date().toISOString()
    });
  }

  sanitizeArgs(args) {
    // ç§»é™¤æ•æ„Ÿä¿¡æ¯
    const sanitized = { ...args };
    delete sanitized.password;
    delete sanitized.token;
    return sanitized;
  }
}
```

## ğŸ“Š ç›‘æ§å’Œè°ƒè¯•

### 1. æ€§èƒ½ç›‘æ§
```javascript
// æ€§èƒ½ç›‘æ§
class PerformanceMonitor {
  constructor() {
    this.metrics = new Map();
  }

  startTimer(operation) {
    const startTime = process.hrtime.bigint();
    return () => {
      const duration = process.hrtime.bigint() - startTime;
      this.recordMetric(operation, Number(duration) / 1000000); // è½¬æ¢ä¸ºæ¯«ç§’
    };
  }

  recordMetric(operation, duration) {
    if (!this.metrics.has(operation)) {
      this.metrics.set(operation, []);
    }
    this.metrics.get(operation).push({
      duration,
      timestamp: Date.now()
    });
  }

  getAverageTime(operation) {
    const metrics = this.metrics.get(operation) || [];
    const sum = metrics.reduce((acc, m) => acc + m.duration, 0);
    return sum / metrics.length;
  }
}
```

### 2. è°ƒè¯•å·¥å…·
```javascript
// è°ƒè¯•å·¥å…·
class MCPDebugger {
  constructor(options = {}) {
    this.enabled = options.enabled || process.env.NODE_ENV === 'development';
    this.logLevel = options.logLevel || 'debug';
  }

  logMessage(direction, message) {
    if (!this.enabled) return;
    
    console.log(`[MCP ${direction}] ${JSON.stringify(message, null, 2)}`);
  }

  logError(error, context) {
    if (!this.enabled) return;
    
    console.error(`[MCP Error] ${error.message}`, {
      error: error.stack,
      context
    });
  }
}
```

## ğŸ”— é›†æˆæŒ‡å—

### Cursor é›†æˆ

1. **å®‰è£… MCP æ‰©å±•**
   ```bash
   # åœ¨ Cursor ä¸­å®‰è£… MCP æ‰©å±•
   code --install-extension mcp-protocol.mcp-client
   ```

2. **é…ç½® MCP è®¾ç½®**
   ```json
   // .cursor/mcp-config.json
   {
     "servers": {
       "my-server": {
         "command": "node",
         "args": ["mcp-server.js"],
         "cwd": "./mcp-servers"
       }
     }
   }
   ```

### WindSurf é›†æˆ

1. **é…ç½® WindSurf MCP**
   ```json
   // windsurf-config.json
   {
     "mcp": {
       "enabled": true,
       "servers": ["my-server"],
       "autostart": true
     }
   }
   ```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å·¥å…·è®¾è®¡åŸåˆ™
- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªå·¥å…·åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½
- **å¹‚ç­‰æ€§**ï¼šåŒæ ·çš„è¾“å…¥åº”è¯¥äº§ç”ŸåŒæ ·çš„è¾“å‡º
- **é”™è¯¯å¤„ç†**ï¼šä¼˜é›…åœ°å¤„ç†å„ç§é”™è¯¯æƒ…å†µ
- **æ–‡æ¡£å®Œæ•´**ï¼šæä¾›æ¸…æ™°çš„æè¿°å’Œç¤ºä¾‹

### 2. æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨è¿æ¥æ± ç®¡ç†èµ„æº
- å®æ–½åˆç†çš„ç¼“å­˜ç­–ç•¥
- æ§åˆ¶å¹¶å‘æ•°é‡
- ç›‘æ§å’Œä¼˜åŒ–å…³é”®è·¯å¾„

### 3. å®‰å…¨è€ƒè™‘
- éªŒè¯æ‰€æœ‰è¾“å…¥æ•°æ®
- å®æ–½æƒé™æ§åˆ¶
- è®°å½•å®¡è®¡æ—¥å¿—
- å®šæœŸå®‰å…¨å®¡æŸ¥

### 4. ç»´æŠ¤å’Œè¿ç»´
- å®æ–½å®Œå–„çš„æ—¥å¿—è®°å½•
- è®¾ç½®ç›‘æ§å’Œå‘Šè­¦
- å®šæœŸå¤‡ä»½é…ç½®
- å»ºç«‹æ•…éšœæ¢å¤æµç¨‹

## ğŸ” æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **è¿æ¥é—®é¢˜**
   ```bash
   # æ£€æŸ¥ MCP æœåŠ¡å™¨çŠ¶æ€
   cbai status
   
   # æŸ¥çœ‹æ—¥å¿—
   cbai logs --tail 100
   
   # æµ‹è¯•è¿æ¥
   cbai test-connection my-server
   ```

2. **å·¥å…·è°ƒç”¨å¤±è´¥**
   ```javascript
   // è°ƒè¯•å·¥å…·è°ƒç”¨
   const debugCall = async (toolName, args) => {
     try {
       const result = await callTool(toolName, args);
       console.log('è°ƒç”¨æˆåŠŸ:', result);
     } catch (error) {
       console.error('è°ƒç”¨å¤±è´¥:', error);
       // æ£€æŸ¥è¾“å…¥å‚æ•°
       console.log('è¾“å…¥å‚æ•°:', args);
       // æ£€æŸ¥å·¥å…·å®šä¹‰
       console.log('å·¥å…·å®šä¹‰:', await getTool(toolName));
     }
   };
   ```

3. **æ€§èƒ½é—®é¢˜**
   ```javascript
   // æ€§èƒ½åˆ†æ
   const analyzePerformance = async () => {
     const monitor = new PerformanceMonitor();
     
     // è®°å½•å„ç§æ“ä½œçš„æ‰§è¡Œæ—¶é—´
     const stopTimer = monitor.startTimer('tool_execution');
     await executeTool();
     stopTimer();
     
     // åˆ†æç»“æœ
     console.log('å¹³å‡æ‰§è¡Œæ—¶é—´:', monitor.getAverageTime('tool_execution'));
   };
   ```

## ğŸ“š å‚è€ƒèµ„æº

- [MCP å®˜æ–¹æ–‡æ¡£](https://modelcontextprotocol.io/)
- [CloudBase AI å¼€å‘è€…æŒ‡å—](https://docs.cloudbase.net/ai/)
- [MCP å·¥å…·è§„èŒƒ](https://github.com/modelcontextprotocol/specification)
- [ç¤¾åŒºå·¥å…·åº“](https://github.com/cloudbase-ai/mcp-tools)

## ğŸ‰ æ€»ç»“

CloudBase AI ToolKit åŸºäº MCP åè®®ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„AIåº”ç”¨å¼€å‘èƒ½åŠ›ã€‚é€šè¿‡éµå¾ªæœ¬æŒ‡å—ä¸­çš„æœ€ä½³å®è·µï¼Œæ‚¨å¯ä»¥æ„å»ºé«˜æ•ˆã€å®‰å…¨ã€å¯ç»´æŠ¤çš„AIåº”ç”¨ï¼Œå¹¶å……åˆ†åˆ©ç”¨MCPç”Ÿæ€ç³»ç»Ÿä¸­çš„å„ç§å·¥å…·å’Œèµ„æºã€‚

æ— è®ºæ‚¨æ˜¯åˆå­¦è€…è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ï¼Œæœ¬æŒ‡å—éƒ½èƒ½å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹å¹¶æ·±å…¥æŒæ¡CloudBase AI ToolKitçš„ä½¿ç”¨æ–¹æ³•ã€‚å¼€å§‹æ‚¨çš„AIå¼€å‘ä¹‹æ—…å§ï¼ 